CREATE DISTRIBUTION ds1 COLUMN TYPES integer;
    add distribution    
------------------------
 distribution id -> ds1
(1 row)

CREATE DISTRIBUTION ds2 COLUMN TYPES integer HASH;
    add distribution    
------------------------
 distribution id -> ds2
(1 row)

CREATE DISTRIBUTION ds3 COLUMN TYPES VARCHAR HASH, INT HASH;
    add distribution    
------------------------
 distribution id -> ds3
(1 row)

CREATE RELATION t (id) IN ds1;
      attach table      
------------------------
 relation name   -> t
 distribution id -> ds1
(2 rows)

CREATE RELATION t2 (id HASH MURMUR) IN ds2;
      attach table      
------------------------
 relation name   -> t2
 distribution id -> ds2
(2 rows)

CREATE RELATION t3 (id HASH MURMUR, id2 HASH MURMUR) IN ds3;
      attach table      
------------------------
 relation name   -> t3
 distribution id -> ds3
(2 rows)

CREATE UNIQUE INDEX ui1 ON t2 COLUMNS (col_uniq_1 varchar HASH);
      create unique index       
--------------------------------
 index ID -> ui1
 relation name -> t2
 column names  -> col_uniq_1
 column types -> varchar hashed
(4 rows)

CREATE UNIQUE INDEX ui2 ON t2 COLUMNS (col_uniq_2 varchar HASH);
      create unique index       
--------------------------------
 index ID -> ui2
 relation name -> t2
 column names  -> col_uniq_2
 column types -> varchar hashed
(4 rows)

CREATE UNIQUE INDEX ui_same_col ON t2 COLUMNS (col_uniq_2 integer HASH);
ERROR:  unique index for table "t2", column "col_uniq_2" already exists
-- reject that
CREATE UNIQUE INDEX uiu ON t COLUMNS (col_uniq integer);
ERROR:  unique indexes are not supported non-hashed distribution
CREATE UNIQUE INDEX uiu ON t3 COLUMNS (col_uniq integer);
ERROR:  unique indexes are supported only for single-column distributions, but ds3 has 2
SHOW unique_indexes;
 id  | relation_name |  columns   |  column_types  
-----+---------------+------------+----------------
 ui1 | t2            | col_uniq_1 | varchar hashed
 ui2 | t2            | col_uniq_2 | varchar hashed
(2 rows)

DROP UNIQUE INDEX ui1;
  drop unique index  
---------------------
 unique index -> ui1
(1 row)

SHOW unique_indexes;
 id  | relation_name |  columns   |  column_types  
-----+---------------+------------+----------------
 ui2 | t2            | col_uniq_2 | varchar hashed
(1 row)

DROP UNIQUE INDEX ui2;
  drop unique index  
---------------------
 unique index -> ui2
(1 row)

DROP DISTRIBUTION ds1 CASCADE;
   drop distribution    
------------------------
 distribution id -> ds1
(1 row)

DROP DISTRIBUTION ds2 CASCADE;
   drop distribution    
------------------------
 distribution id -> ds2
(1 row)

DROP DISTRIBUTION ds3 CASCADE;
   drop distribution    
------------------------
 distribution id -> ds3
(1 row)

