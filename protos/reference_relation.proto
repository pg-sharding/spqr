syntax = "proto3";

package spqr;

option go_package = "spqr/proto";

import "google/protobuf/empty.proto";

message ReferenceRelation {
  string name = 1;
  map<string, string> sequenceColumns = 2;
  int64 schema_version = 3;
  repeated string shardIds = 4;
}

message CreateReferenceTablesRequest{
  repeated ReferenceRelation relations = 1;
}

message DropReferenceTablesRequest {
  repeated string ids = 1;
}


message ListReferenceTablessReply {
  repeated ReferenceRelation relations = 1;
}

message SyncReferenceTablesRequest {
    string shard_id = 1;
}

service ReferenceTablesService {
  rpc CreateReferenceTables(CreateReferenceTablesRequest) returns (google.protobuf.Empty) {}
  rpc DropReferenceTables(DropReferenceTablesRequest) returns (google.protobuf.Empty) {}
  rpc ListReferenceTabless(google.protobuf.Empty) returns (ListReferenceTablessReply) {}

  rpc SyncReferenceTables(SyncReferenceTablesRequest) returns (google.protobuf.Empty) {} 
}
